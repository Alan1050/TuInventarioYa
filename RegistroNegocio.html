<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="img/LogoPuroAzul.png">
    <title>Registro de Negocio - TuInventarioYa</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/RegistroNegocio.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script> 
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script> 
<script type="text/javascript">
  (function(){
    emailjs.init("m08KhDfnF_sAY8vNM"); // Tu Public Key
  })();
</script>
  </head>
  <body>

    <header>
      <div class="header-pt1">
        <img src="img/LogoPuroBlanco.png" alt="" style="width: 60%; padding-top: 9px; margin-left: 35px; ">
      </div>
      <div class="header-pt2">
        <h1>Tu Inventario Ya</h1>
      </div>
    </header>

    <!--<form action="Procesar_Registro.php" method="post" class="container" autocomplete="off">-->
     <form class="container" id="registroForm">
      <h1>Registro de Negocio</h1>
      <div id="registroNegocio" >
        <div class="grid-2">
          <div class="form-group">
            <label for="nombreNegocio">Nombre del Negocio</label>
            <input
              type="text"
              id="nombreNegocio"
              name="nombreNegocio"
              placeholder="Ej: Mi Tienda"
              required
            />
          </div>

          <div class="form-group">
            <label for="nombrePropietario">Nombre del Propietario</label>
            <input
              type="text"
              id="nombrePropietario"
              name="nombrePropietario"
              placeholder="Tu nombre completo"
              required
            />
          </div>
        </div>

        <div class="grid-2">
          <div class="form-group">
            <label for="codigoPostal">Código Postal</label>
            <input
              type="text"
              id="codigoPostal"
              name="codigoPostal"
              placeholder="00000"
              required
            />
          </div>

          <div class="form-group">
            <label for="telefono">Teléfono</label>
            <input
              type="tel"
              id="telefono"
              name="telefono"
              placeholder="+00 000 000 0000"
              required
            />
          </div>
        </div>

        <div class="form-group">
          <label for="direccion">Dirección</label>
          <input
            type="text"
            id="direccion"
            name="direccion"
            placeholder="Calle, número, colonia"
            required
          />
        </div>

        <div class="form-group">
          <label for="email">Correo Electrónico</label>
          <input
            type="email"
            id="email"
            name="email"
            placeholder="tunegocio@ejemplo.com"
            required
          />
        </div>

        <div class="grid-2">
          <div class="form-group">
            <label for="tipoNegocio">Tipo de Negocio</label>
            <select id="tipoNegocio" name="tipoNegocio" required>
              <option value="" disabled selected>Seleccione una opción</option>
              <option value="ferreteria">Ferretería</option>
              <option value="electronica">Electrónica</option>
              <option value="telefonos_computadoras">
                Teléfonos/Computadoras
              </option>
              <option value="ropa">Ropa</option>
              <option value="supermercado">Supermercado</option>
              <option value="restaurante">Restaurante</option>
              <option value="otro">Otro</option>
            </select>
          </div>

          <div class="form-group">
            <label for="precioPublico">Mostrar precios al publico</label>
            <select id="precioPublico" name="precioPublico" required>
              <option value="" disabled selected>Seleccione una opción</option>
              <option value="si">Si</option>
              <option value="no">No</option>
            </select>
          </div>
        </div>

        <div class="section-title">Horario de Atención</div>

        <div class="horario-container">
          <div class="dia-horario">
            <label>Lunes</label>
            <div class="horario-inputs">
              <input type="time" name="lunesInicio" id="lunesInicio" />
              <span>a</span>
              <input type="time" name="lunesFin" id="lunesFin" />
              <button type="button" class="cerrado-btn" data-dia="lunes">
                Cerrado
              </button>
            </div>
          </div>

          <div class="dia-horario">
            <label>Martes</label>
            <div class="horario-inputs">
              <input type="time" name="martesInicio" id="martesInicio" />
              <span>a</span>
              <input type="time" name="martesFin" id="martesFin" />
              <button type="button" class="cerrado-btn" data-dia="martes">
                Cerrado
              </button>
            </div>
          </div>

          <div class="dia-horario">
            <label>Miércoles</label>
            <div class="horario-inputs">
              <input type="time" name="miercolesInicio" id="miercolesInicio" />
              <span>a</span>
              <input type="time" name="miercolesFin" id="miercolesFin" />
              <button type="button" class="cerrado-btn" data-dia="miercoles">
                Cerrado
              </button>
            </div>
          </div>

          <div class="dia-horario">
            <label>Jueves</label>
            <div class="horario-inputs">
              <input type="time" name="juevesInicio" id="juevesInicio" />
              <span>a</span>
              <input type="time" name="juevesFin" id="juevesFin" />
              <button type="button" class="cerrado-btn" data-dia="jueves">
                Cerrado
              </button>
            </div>
          </div>

          <div class="dia-horario">
            <label>Viernes</label>
            <div class="horario-inputs">
              <input type="time" name="viernesInicio" id="viernesInicio" />
              <span>a</span>
              <input type="time" name="viernesFin" id="viernesFin" />
              <button type="button" class="cerrado-btn" data-dia="viernes">
                Cerrado
              </button>
            </div>
          </div>

          <div class="dia-horario">
            <label>Sábado</label>
            <div class="horario-inputs">
              <input type="time" name="sabadoInicio" id="sabadoInicio" />
              <span>a</span>
              <input type="time" name="sabadoFin" id="sabadoFin" />
              <button type="button" class="cerrado-btn" data-dia="sabado">
                Cerrado
              </button>
            </div>
          </div>

          <div class="dia-horario">
            <label>Domingo</label>
            <div class="horario-inputs">
              <input type="time" name="domingoInicio" id="domingoInicio" />
              <span>a</span>
              <input type="time" name="domingoFin" id="domingoFin" />
              <button type="button" class="cerrado-btn" data-dia="domingo">
                Cerrado
              </button>
            </div>
          </div>
        </div>
          <input type="submit" value="Registrar Negocio" class="btn-submit">
      </div>
    </form>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const cerradoBtns = document.querySelectorAll(".cerrado-btn");

        cerradoBtns.forEach((btn) => {
          btn.addEventListener("click", function () {
            const dia = this.getAttribute("data-dia");
            const inicioInput = document.getElementById(`${dia}Inicio`);
            const finInput = document.getElementById(`${dia}Fin`);

            if (this.classList.contains("active")) {
              this.classList.remove("active");
              this.textContent = "Cerrado";
              inicioInput.disabled = false;
              finInput.disabled = false;
            } else {
              this.classList.add("active");
              this.textContent = "Abierto";
              inicioInput.disabled = true;
              finInput.disabled = true;
              inicioInput.value = "";
              finInput.value = "";
            }
          });
        });
      });
    </script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("registroForm");

    form.addEventListener("submit", function (e) {
        e.preventDefault(); // Evitar recarga de página

        // Capturar datos del formulario
        const formData = new FormData(form);
        const data = Object.fromEntries(formData);

        // Mostrar alerta de éxito
        Swal.fire({
            title: "¡Registro Exitoso!",
            html: `El negocio <b>${data.nombreNegocio}</b> ya se registro en la lista de espera.<br><br>
                   Te agradecemos tu preferencia, pronto tendras acceso a tu plataforma<br>`,
            icon: "success",
            confirmButtonText: "Aceptar",
            timer: 10000,
            willClose: () => {
                window.location.href = "index.html";
            }
        });

        // Preparar parámetros para EmailJS
        const templateParams = {
            NamePropietario: data.nombrePropietario,
            NombreNegocio: data.nombreNegocio,
            email: data.email,
            tel : data.telefono,
            tipo: data.tipoNegocio,
            cp: data.codigoPostal,
            Ubicacion: data.direccion
        };

        // Enviar correo con EmailJS
        emailjs.send("service_a2o1ztr", "template_uo6pgsp", templateParams)
            .then(function(response) {
                console.log("✅ Correo enviado:", response.status, response.text);
            }, function(error) {
                console.error("❌ Error al enviar correo:", error);
            });
    });
});
</script>

  </body>
</html>
